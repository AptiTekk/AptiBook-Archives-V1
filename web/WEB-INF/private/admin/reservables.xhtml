<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:pf="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

<ui:composition>
    <h:panelGroup layout="block" id="reservablesPage">
        <b:container>
            <b:row>
                <b:column colXs="12" colSm="3">
                    <h:form>
                        <div class="form-group">
                            <pf:dataTable id="reservableTypeDT" value="#{ReservablesEditController.reservableTypes}"
                                          var="reservableType"
                                          selectionMode="single"
                                          selection="#{ReservablesEditController.selectedReservableType}"
                                          rowKey="#{reservableType.id}" sortBy="#{reservableType.name}">
                                <pf:ajax event="rowSelect" update=":reservablesPage" onstart="loading_start()"
                                         oncomplete="loading_complete()"/>
                                <pf:ajax event="rowUnselect" update=":reservablesPage" onstart="loading_start()"
                                         oncomplete="loading_complete()"/>
                                <pf:column headerText="Reservable Type" priority="1" style="width:100%">
                                    <h:outputText value="#{reservableType.name}"/>
                                </pf:column>
                            </pf:dataTable>
                        </div>
                        <div class="form-group">
                            <h:commandButton action="#{ReservablesEditController.addNewReservableType}"
                                             styleClass="btn btn-success" value="Add New Reservable Type">
                                <f:ajax render=":reservablesPage" onevent="loading"/>
                            </h:commandButton>
                        </div>
                    </h:form>
                </b:column>

                <b:column colXs="12" colSm="9">
                    <h:form styleClass="form-horizontal">

                        <b:column colXs="9" offsetXs="3">
                            <b:messages for="reservableTypeEditForm" showSummary="false" showDetail="true"/>
                            <h4>Reservable Type Settings:</h4>
                        </b:column>
                        <div class="form-group">
                            <h:outputLabel value="Name:" styleClass="col-xs-3 control-label"/>
                            <b:column colXs="9">
                                <h:inputText styleClass="form-control"
                                             value="#{ReservablesEditController.editableReservableTypeName}" />
                            </b:column>
                        </div>
                        <b:column colXs="9" offsetXs="3">
                            <h4>Reservables:</h4>
                        </b:column>
                        <!-- TODO: List of reservables, ability to add reservables, etc. -->
                        <div class="form-group">
                            <div class="col-xs-offset-3 col-xs-9">
                                <div class="btn-toolbar">
                                    <h:commandButton styleClass="btn btn-primary"
                                                     value="Save Changes" style="display: inline-block"
                                                     action="#{ReservablesEditController.updateSettings()}"
                                                     disabled="#{ReservablesEditController.selectedReservableType == null}">
                                        <f:ajax execute="@form" render=":reservablesPage" onevent="loading"/>
                                    </h:commandButton>
                                    <h:commandButton styleClass="btn btn-default"
                                                     value="Reset Fields" style="display: inline-block"
                                                     action="#{ReservablesEditController.resetSettings()}"
                                                     disabled="#{ReservablesEditController.selectedReservableType == null}">
                                        <f:ajax execute="@form" render=":reservablesPage" onevent="loading"/>
                                    </h:commandButton>
                                    <b:button styleClass="btn btn-danger"
                                              value="Delete Reservable Type"
                                              style="display: inline-block"
                                              p:data-toggle="modal"
                                              p:data-target="#deletionConfirmModal"
                                              disabled="#{ReservablesEditController.selectedReservableType == null}"/>
                                </div>
                            </div>
                        </div>
                    </h:form>
                </b:column>
            </b:row>

            <!-- Deletion Confirmation Modal -->
            <b:modal id="deletionConfirmModal" title="Reservable Type
                         Deletion Confirmation">
                Are you sure you want to delete the Reservable Type '#{ReservablesEditController.selectedReservableType.name}'?
                <br/>
                <p style="text-decoration: underline">All associated reservables will be deleted as well!</p>
                <f:facet name="footer">
                    <b:button styleClass="btn btn-default"
                              p:data-dismiss="modal" value="Cancel"/>
                    <h:commandButton styleClass="btn btn-danger"
                                     p:data-dismiss="modal" value="Delete"
                                     action="#{ReservablesEditController.deleteSelectedReservableType}">
                        <f:ajax render=":reservablesPage" onevent="loading"/>
                    </h:commandButton>
                </f:facet>
            </b:modal>
            <!-- End Deletion Confirmation Modal -->
        </b:container>
    </h:panelGroup>
</ui:composition>

</html>