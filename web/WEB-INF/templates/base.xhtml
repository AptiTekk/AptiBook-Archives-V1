<!--
  ~ Copyright (C) 2016 AptiTekk, LLC. (https://AptiTekk.com/) - All Rights Reserved
  ~ Unauthorized copying of any part of AptiBook, via any medium, is strictly prohibited.
  ~ Proprietary and confidential.
  -->

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
<h:head>

    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="#{resource['images/favicons/apple-touch-icon.png']}"/>
    <link rel="icon" type="image/png" href="#{resource['images/favicons/favicon-32x32.png']}" sizes="32x32"/>
    <link rel="icon" type="image/png" href="#{resource['images/favicons/android-chrome-192x192.png']}" sizes="192x192"/>
    <link rel="icon" type="image/png" href="#{resource['images/favicons/favicon-16x16.png']}" sizes="16x16"/>
    <link rel="manifest" href="#{resource['images/favicons/manifest.json']}"/>
    <link rel="mask-icon" href="#{resource['images/favicons/safari-pinned-tab.svg']}"/>
    <link rel="shortcut icon" href="#{resource['images/favicons/favicon.ico']}"/>
    <meta name="msapplication-config" content="#{resource['images/favicons/browserconfig.xml']}"/>
    <meta name="theme-color" content="#ffffff"/>

    <script type="text/javascript">
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                        (i[r].q = i[r].q || []).push(arguments)
                    }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-46481658-2', 'auto');
        ga('send', 'pageview');
    </script>

    <script type="text/javascript">
        jsf.ajax.addOnEvent(function (data) {
            loading(data);
        });

        function loading(data) {
            if (data.status === 'begin') {
                if(!$(data.source).is('input:text') &amp;&amp; !$(data.source).hasClass('date'))
                    loading_start();
            } else if (data.status === 'success' || data.status === 'error') {
                loading_complete();
            }

            if (data.redirect) {
                window.location.replace(data.redirect);
            }
        }

        function loading_start() {
            var loading = document.getElementById("loading");
            loading.style.opacity = "1";
        }

        function loading_complete() {
            var loading = document.getElementById("loading");
            loading.style.opacity = "0";
        }
    </script>

    <title>AptiBook</title>

    <h:outputStylesheet library="css" name="style.css"/>
    <ui:insert name="css"/>

</h:head>
<h:body styleClass="aptibook">
    <div id="loading"></div>
    <ui:insert name="default"/>

    <ui:include src="includes/helpModal.xhtml"/>
    <ui:include src="includes/infoModal.xhtml"/>

    <h:outputScript library="js" name="fix_double_click.js"/>
    <ui:insert name="js"/>
</h:body>
</html>