<!--
  ~ Copyright (C) 2016 AptiTekk, LLC. (https://AptiTekk.com/) - All Rights Reserved
  ~ Unauthorized copying of any part of AptiBook, via any medium, is strictly prohibited.
  ~ Proprietary and confidential.
  -->

<!-- Created 9/24/2016-->
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                            http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.2.xsd">

    <!-- Converts all "TIMESTAMP" type columns to "TIMESTAMPTZ" to allow timezone support. -->
    <!-- Converts all "VARCHAR(x)" type columns to "TEXT", which is identical to VARCHAR except that it lacks a limit-->
    <changeSet id="15" author="MitchTalmadge">
        <modifyDataType tableName="notification" columnName="creation" newDataType="TIMESTAMPTZ" />

        <modifyDataType tableName="asset" columnName="name" newDataType="TEXT" />
        <modifyDataType tableName="assetcategory" columnName="name" newDataType="TEXT" />
        <modifyDataType tableName="notification" columnName="subject" newDataType="TEXT" />
        <modifyDataType tableName="notification" columnName="body" newDataType="TEXT" />
        <modifyDataType tableName="permission" columnName="descriptor" newDataType="TEXT" />
        <modifyDataType tableName="property" columnName="propertykey" newDataType="TEXT" />
        <modifyDataType tableName="property" columnName="propertyvalue" newDataType="TEXT" />
        <modifyDataType tableName="reservation" columnName="status" newDataType="TEXT" />
        <modifyDataType tableName="reservation" columnName="title" newDataType="TEXT" />
        <modifyDataType tableName="reservationdecision" columnName="comment" newDataType="TEXT" />
        <modifyDataType tableName="tag" columnName="name" newDataType="TEXT" />
        <modifyDataType tableName="tenant" columnName="slug" newDataType="TEXT" />
        <modifyDataType tableName="user" columnName="username" newDataType="TEXT" />
        <modifyDataType tableName="user" columnName="firstname" newDataType="TEXT" />
        <modifyDataType tableName="user" columnName="lastname" newDataType="TEXT" />
        <modifyDataType tableName="user" columnName="location" newDataType="TEXT" />
        <modifyDataType tableName="user" columnName="phonenumber" newDataType="TEXT" />
        <modifyDataType tableName="user" columnName="verificationcode" newDataType="TEXT" />
        <modifyDataType tableName="user" columnName="userstate" newDataType="TEXT" />
        <modifyDataType tableName="usergroup" columnName="name" newDataType="TEXT" />
    </changeSet>

</databaseChangeLog>